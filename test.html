<!DOCTYPE html>
<html>
<head>
    <title>Audio Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        button { padding: 10px; margin: 5px; }
        #log { 
            margin-top: 20px; 
            padding: 10px;
            background: #f0f0f0;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Audio Test</h1>
    <button onclick="testAudio()">Test Audio</button>
    <div id="log"></div>

    <script>
        function log(msg) {
            const logEl = document.getElementById('log');
            logEl.textContent = new Date().toISOString() + ': ' + msg + '\n' + logEl.textContent;
            console.log(msg);
        }

        async function testAudio() {
            try {
                log('Verifying sound file...');
                const soundPath = await window.testAPI.verifySound();
                log('Sound file verified at: ' + soundPath);

                log('Creating Audio object...');
                const audio = new Audio(`file://${soundPath}`);
                
                audio.onerror = (e) => {
                    log('Audio error: ' + (e.target.error?.message || 'Unknown error'));
                };

                audio.oncanplaythrough = () => {
                    log('Audio loaded and ready to play');
                };

                audio.onplay = () => {
                    log('Audio started playing');
                };

                log('Setting volume to max...');
                audio.volume = 1.0;

                log('Attempting to play...');
                await audio.play();
                log('Play command issued successfully');
            } catch (error) {
                log('Error: ' + error.message);
            }
        }
    </script>
</body>
</html>
